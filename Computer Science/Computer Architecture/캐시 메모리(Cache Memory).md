# 캐시 메모리(Cache Memory)

 1. **기억 장치**

    - 전자회로에서 데이터나 상태, 명령어 등을 기록하는 장치로 흔히 '메모리' 라고 불림

    - CPU에 가까운 순서로 **'레지스터(CPU) > (캐시 메모리) > 주 기억 장치 > (캐시 메모리) > 보조 기억 장치 '**
    - 일반적으로 용량이 작을 수록 동작 속도가 빠르며, 용량이 클수록 동작 속도가 느리다.

    1. **캐시 메모리**

       - 프로그램에서 직접적으로 읽거나 쓸 수 없고 하드웨어의 메모리 관리 시스템이 내부적으로 제어하는 저장 장치
       - 일반적으로 용량이 작을수록 동작 속도가 빠르며, 용량이 클수록 동작 속도가 느리다.
       - CPU의 연산 처리 속도에 맞추어 빠른 속도로 데이터를 CPU에 제공하는 저장 장치

    2. **주 기억 장치**

       - CPU에서 직접 접근이 가능한 메모리

         > 즉, **'주 기억 장치 100번지의 내용을 레지스터 1번에 저장하라'** 혹은 **'레지스터 1번의 내용을 주 기억 장치 100번에 덮어써라'**와 같은 명령이 가능하다.

       - 직접 접근이 가능하지만 상수를 쓰는 것 이외의 연산은 CPU에서 바로 수행할 수 없으며, 메모리의 값을 레지스터로 인출(Load, 로드), 연산, 저장(연산 결과 적용)의 단계를 거쳐야 한다.

    3. **보조 기억 장치**

       - CPU에서 직접 접근이 불가능한 메모리
       - 접근하기 위해서는 기억 장치의 특정 위치의 내용을 주 기억 장치로 로드(Load)한 뒤 읽어야 한다.



2. **캐시 메모리**

   - 캐시 메모리는 Level1부터 Level3까지 단계를 나누어 사용.

     > Level1 : 용량이 작고, 속도가 빠름 <-> Level3: 용량이 크고, 속도가 느림 

   - CPU는 우선적으로 Level1 캐시에 데이터를 요청 , Level1에 데이터가 없을 경우 Level2 > Level3 캐시 > 주 저장 장치 순서로 순차적으로 데이터를 요청

   - **작동 원리**

     - 시간 지역성(Tempoal Locality) 

       > for 혹은 while 같은 반복문에 사용하는 조건 변수처럼 한번 참조된 데이터는 잠시 후에 또 참조될 가능성이 높다

     - 공간 지역성(Spatial Locality)

       > A[0], A[1] 과 같은 데이터 배열에 연속으로 접근할 때 참조된 데이터 근처에 있는 데이터가 잠시 후에 사용될 가능 성이 높다

     - 순차적 지역성(Sequential Locality)

       > 분기(branch)가 발생하는 비순차적 실행이 아닌 명령어들이 비순차적 실행이 아닌 이상 명령어들이 메모리에 저장된 순서대로 실행하는 특성을 이용하는 원리로 순차적일 수록 다음 순서의 데이터가 사용될 가능성이 높다

   - **캐시 메모리의 목표**

     - 캐시 적중률의 최대화 & 부적중률의 최소화
       (캐시 적중 : CPU가 요청한 데이터가 캐시 메모리에 있는 경우 / 캐시 부적중 : CPU가 요청한 데이터가 캐시 메모리에 없어 DRAM에서 가져오는 상황)
     - 캐시 레이턴시의 최소화
     - 캐시 대역폭의 최대화
     - 캐시 정책 및 알고리즘의 최적화
     - 캐시 부적중에 따른 패널티의 최소화
     - 데이터 일관성 보장
     - 데이터 일관성에 따른 오버헤드 최소화

   - **캐시 부적중의 종류**

     - Compulsory miss (Cold miss) : 해당 메모리 주소를 처음 불렀기 때문에 발생하는 미스, 프로그램의 최초 실행하는 경우 발생
     - Conflict miss : 서로 다른 데이터가 동일한 캐시 메모리 주소에 할당되어 발생하는 캐시 미스
     - Capacity miss : 캐시 메모리에 공간이 부족하여 발생하는 캐시 미스